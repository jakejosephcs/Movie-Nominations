import React, { useState, useEffect } from 'react';

export default function ShowMore({ movie }) {
  const [movieInfo, setMovieInfo] = useState(null);

  const styles = {
    color: '#004c3f',
    backgroundColor: '#faf7ed',
    padding: '1.5em 0.5em 0.5em 0.5em',
    borderRadius: '0.5em 0.75em 0.5em 0.5em',
    fontSize: '0.75rem',
  };

  useEffect(() => {
    fetch(
      `https://www.omdbapi.com/?apikey=b52f3d48&type=movie&i=${movie.imdbID}`
    )
      .then(response => response.json())
      .then(data => setMovieInfo(data));
  }, [movie]);

  console.log('fetching');

  return (
    <div style={styles} className='show-more'>
      {movieInfo ? (
        <>
          <p className='plot'>{movieInfo.Plot}</p>
          <svg
            width='31'
            height='16'
            viewBox='0 0 41 21'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
            className='imdb-logo'
          >
            <path
              d='M41 1.80489C40.8888 0.880344 40.2135 0.143463 39.3536 0C35.5844 0 5.43197 0 1.66282 0C0.720887 0.15723 0 1.02598 0 2.07297C0 3.75613 0 17.2185 0 18.9009C0 20.0602 0.882035 21 1.97085 21C5.67797 21 35.3384 21 39.0456 21C40.0481 21 40.8759 20.2023 41 19.1698C41 15.6969 41 3.54094 41 1.80489Z'
              fill='#F6C700'
            />
            <path
              d='M4.94496 4.21973H8.19858V16.9467H4.94496V4.21973Z'
              fill='black'
            />
            <path
              d='M14.3464 10.0822C14.0669 8.14258 13.9115 7.06443 13.8808 6.84924C13.7446 5.81094 13.6149 4.90741 13.4908 4.13647C13.2091 4.13647 11.8037 4.13647 9.27243 4.13647V16.8634H12.1225L12.1324 8.45994L13.3318 16.8634H15.3618L16.4991 8.273L16.5098 16.8634H19.3506V4.13647H15.1001L14.3464 10.0822Z'
              fill='black'
            />
            <path
              d='M24.7219 6.78403C24.7576 6.94633 24.7761 7.31441 24.7761 7.88971C24.7761 8.38314 24.7761 12.3306 24.7761 12.824C24.7761 13.671 24.7219 14.1898 24.6143 14.3811C24.5059 14.5723 24.2178 14.6673 23.7508 14.6673C23.7508 13.8318 23.7508 7.14848 23.7508 6.31306C24.1051 6.31306 24.3469 6.35146 24.4752 6.42682C24.6036 6.5029 24.6863 6.62172 24.7219 6.78403ZM26.1915 16.7337C26.5787 16.6475 26.9038 16.4953 27.1677 16.2787C27.4308 16.0613 27.6155 15.7606 27.721 15.3759C27.8272 14.9919 27.89 14.2289 27.89 13.0877C27.89 12.6414 27.89 9.06567 27.89 8.61862C27.89 7.41439 27.8436 6.60723 27.7716 6.19713C27.6989 5.7863 27.5185 5.41315 27.2297 5.07841C26.9402 4.74366 26.5181 4.5031 25.9633 4.35674C25.4079 4.21038 24.5023 4.13647 22.9272 4.13647C22.7653 4.13647 21.9567 4.13647 20.5 4.13647V16.8634H24.4417C25.3501 16.8344 25.9334 16.7917 26.1915 16.7337Z'
              fill='black'
            />
            <path
              d='M33.1394 14.8318C33.0795 14.9933 32.8171 15.0752 32.6189 15.0752C32.4249 15.0752 32.2959 14.997 32.2303 14.8397C32.1647 14.6832 32.1326 14.326 32.1326 13.7667C32.1326 13.4305 32.1326 10.7394 32.1326 10.4032C32.1326 9.82359 32.1611 9.46203 32.2189 9.31784C32.2759 9.1751 32.4014 9.10265 32.5954 9.10265C32.7936 9.10265 33.0595 9.18452 33.128 9.349C33.1957 9.51347 33.23 9.86489 33.23 10.4032C33.23 10.6206 33.23 11.7074 33.23 13.6645C33.2093 14.3347 33.1793 14.7238 33.1394 14.8318ZM28.998 16.7526H31.9272C32.0492 16.2664 32.1162 15.9961 32.1297 15.9418C32.395 16.2678 32.6866 16.5127 33.0068 16.6751C33.3255 16.8381 33.8025 16.9192 34.1719 16.9192C34.686 16.9192 35.1295 16.7823 35.5039 16.5077C35.8775 16.2338 36.1156 15.9092 36.2169 15.536C36.3182 15.1622 36.3688 14.5941 36.3688 13.8304C36.3688 13.4732 36.3688 10.617 36.3688 10.2598C36.3688 9.49174 36.3517 8.99034 36.3182 8.75486C36.2846 8.51937 36.1848 8.27954 36.0187 8.03392C35.8525 7.78829 35.6108 7.59773 35.2942 7.46151C34.9776 7.32529 34.604 7.25718 34.1733 7.25718C33.799 7.25718 33.3198 7.33326 33.0004 7.48325C32.6816 7.63323 32.3921 7.86074 32.1326 8.16579C32.1326 7.88973 32.1326 6.51016 32.1326 4.02563H28.998V16.7526Z'
              fill='black'
            />
          </svg>

          <p className='rating'>{movieInfo.imdbRating}</p>
        </>
      ) : null}
    </div>
  );
}
